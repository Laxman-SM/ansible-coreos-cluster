# generate CA https certificate for skydns.local
- name: Create keys/region directory
  file: path=keys/ state=directory mode=0700

- name: create skydns.local CA key
  shell: "openssl genrsa -out keys/skydns_local.key 2048"
  args:
    creates: "keys/skydns_local.key"
- name: create skydns.local CA csr
  shell: "openssl req -sha256 -new -subj {{ skydns_ca_subj }} -key keys/skydns_local.key -out keys/skydns_local.csr"
  args:
    creates: "keys/skydns_local.csr"
- name: create skydns.local CA crt
  shell: "openssl x509 -days 3650 -signkey keys/skydns_local.key -in keys/skydns_local.csr -req -out keys/skydns_local.crt"
  args:
    creates: "keys/skydns_local.crt"
